<ion-header>
    <ion-toolbar color="light">
        <ion-buttons slot="start">
            <ion-button (click)="dismiss()">
                <ion-icon slot="icon-only" name="close-outline"></ion-icon>
            </ion-button>
        </ion-buttons>

        <ion-title></ion-title>
    </ion-toolbar>
</ion-header>

<ion-content>
    <form class="flex-col h-100 ion-padding-horizontal" (submit)="change()" [formGroup]="form" novalidate="novalidate">
        <div class="ion-padding-top">
            <ion-card-title color="primary">Change Password</ion-card-title>
            <ion-text>Improve your security with a strong password</ion-text>

            <pi-custom-field class="ion-margin-vertical" label="Current Password" [field]="oldPassword" [errors]="['minlength', 'maxlength']">
                <ion-input type="password" [clearInput]="true" formControlName="oldPassword" placeholder="..."></ion-input>
            </pi-custom-field>

            <br />

            <pi-custom-field class="ion-margin-bottom" label="New Password" [field]="newPassword" [errors]="['minlength', 'maxlength']">
                <ion-input type="password" [clearInput]="true" formControlName="newPassword" placeholder="..."></ion-input>

                <ng-container *ngIf="pwStrength" custom-errors>
                    <ion-text [color]="pwStrength.colour">{{ pwStrength.message }}</ion-text>
                </ng-container>
            </pi-custom-field>

            <pi-custom-field
                class="ion-margin-bottom"
                label="Confirm Password"
                [field]="confirmPassword"
                [errors]="['minlength', 'maxlength', 'mismatch']"
                [trxParams]="{ 'mismatch': { name: 'Passwords' } }"
            >
                <ion-input type="password" [clearInput]="true" formControlName="confirmPassword" placeholder="..."></ion-input>
            </pi-custom-field>
        </div>

        <div class="ion-padding-vertical mt-a">
            <ion-button type="submit" expand="block" [disabled]="form.invalid"> Change Password </ion-button>
        </div>
    </form>
</ion-content>
